Emails: ronavraham1999@gmail.com michael9090124@gmail.com

# Coup (מטלה 3) — Michael and Ron





פרויקט המדמה את משחק **Coup** כולל מימוש לוגיקה, בדיקות יחידה, והרצת **GUI** להצגה קומפקטית של המשחק (כל השחקנים על אותו מסך, תפריט לפי תור נוכחי).

---

## תוכן עניינים

* [דרישות מערכת](#דרישות-מערכת)
* [מבנה הפרויקט](#מבנה-הפרויקט)
* [בניית הפרויקט והרצה](#בניית-הפרויקט-והרצה)
* [בדיקות יחידה](#בדיקות-יחידה)
* [בדיקת זליגות זיכרון](#בדיקת-זליגות-זיכרון)
* [תסריט דמו](#תסריט-דמו)
* [פתרון תקלות נפוצות](#פתרון-תקלות-נפוצות)
* [מדיניות שגיאות וחריגות](#מדיניות-שגיאות-וחריגות)
* [קווים מנחים לקוד](#קווים-מנחים-לקוד)
* [גילוי נאות](#גילוי-נאות)

---

## דרישות מערכת

**Ubuntu / Linux**

```bash
sudo apt update
sudo apt install build-essential        # g++, make
sudo apt install libsfml-dev            # עבור ה-GUI (SFML)
```

> *ספריות נוספות (כמו SDL) אינן נדרשות כרגע – ה-GUI מוגדר לעבוד עם SFML.*

---

## מבנה הפרויקט

```
.
├── include/
│   ├── Game.hpp
│   ├── Player.hpp
│   ├── Role.hpp
│   ├── types.hpp
│   ├── errors.hpp
│   ├── EventLog.hpp
│   ├── AuthorityLists.hpp
│   └── roles/
│       ├── Baron.hpp
│       ├── General.hpp
│       ├── Governor.hpp
│       ├── Judge.hpp
│       ├── Merchant.hpp
│       └── Spy.hpp
├── src/
│   ├── Game.cpp
│   ├── Player.cpp
│   ├── Main.cpp        # דמו קונסול
│   └── GuiMain.cpp     # נקודת כניסה ל-GUI
├── tests/
│   ├── doctest/doctest.h
│   └── test_core.cpp
├── Makefile
└── README.md
```

---

## בניית הפרויקט והרצה

### דמו קונסול (CLI)

```bash
make            # קומפילציה לברירת מחדל -> Main
./Main          # הרצת הדמו
# או
make run        # בנייה + הרצה
```

### ממשק גרפי (GUI)

```bash
make gui        # בונה את Gui
./Gui           # מפעיל את חלון המשחק
```

### ניקוי

```bash
make clean
```

---

## בדיקות יחידה

הבדיקות כתובות עם **doctest** ומכסות מקרים רגילים ומקרי קצה.

```bash
make test       # בונה ומריץ את הבדיקות (tests/test_runner)
```

---

## בדיקת זליגות זיכרון

בדיקת זליגות מתבצעת על דמו ה-CLI:

```bash
make valgrind
# שקול להריץ ידנית לקבלת פירוט:
valgrind --leak-check=full --errors-for-leak-kinds=all --error-exitcode=1 ./Main
```

---

## תסריט דמו

דמו ה-CLI (`Main.cpp`) יוצר משחק עם מספר שחקנים, מריץ מספר תורות, ומדפיס **לוג אירועים** (EventLog) וסטטוס “Active/Blocked” בהתאם לכללים:

* פעולות בסיס: `gather`, `tax`, `bribe`, `arrest`, `sanction`, `coup`
* חוקים עיקריים (דגשים):

  * **חובה לבצע coup** בתחילת תור **אם נכנסים לתור עם 10 מטבעות** בדיוק.
  * **מותר bribe לפני coup** רק אם נכנסים לתור עם **11+ מטבעות**.
  * בלוקים/סנקציות בהתאם לתפקידים.

> ה-GUI מציג את מצב השחקנים/לוג בקצרה ומאפשר ניווט לפי התור הנוכחי על מסך משותף.

---

## פתרון תקלות נפוצות

**1) GUI לא נבנה / חסרות ספריות SFML**

```bash
sudo apt update
sudo apt install libsfml-dev
make clean && make gui && ./Gui
```

**2) `Permission denied` בהרצת `./Gui`**

```bash
chmod +x Gui && ./Gui
```

**3) ריצה ב-VM (VirtualBox) – חלון לא מופיע**

* הפעל **3D Acceleration** והגדל **Video Memory** ל-128MB+
* אתחל את ה-VM ונסה שוב:

```bash
make clean && make gui && ./Gui
```

**4) Makefile לא מוצא קבצים בתיקיית src**

* ודא שהתיקייה נקראת **בדיוק** `src` (בלי רווחים).
* אם בטעות הייתה תיקייה `'src '`:

```bash
mv "src " src
make clean && make gui && ./Gui
```

---

## מדיניות שגיאות וחריגות

* פונקציות בודקות קלט לא חוקי וזורקות חריגות מתאימות (`std::invalid_argument`, `std::runtime_error` וכו') עם הודעות ברורות.
* בדיקות היחידה כוללות גם מקרים גבוליים, בלוקים ותלויות בין תפקידים.

---

## קווים מנחים לקוד

* קוד **נקי, מודולרי, מחולק לקבצים** עם שמות ברורים.
* **תיעוד** בקרבת הפונקציות והמחלקות (באנגלית/עברית לפי הצורך).
* בכל קובץ מקור/כותרת מופיע **כתובת מייל** בראש הקובץ (כנדרש במטלה).
* עמידה בכללי המטלה: Makefile מלא, GUI, בדיקות, Valgrind, README.

---

## גילוי נאות

נעזרתי ב- AI לצורך כתיבת מסמך ה- REAME הזה, ובנוסף ציינו בפרויקט איפה שנעשה שימוש ב-AI.
בנוסף, בקובץ נפרד צירפנו קישורים לצ'אטים המלאים של הבינה המלאכותית בהם נעזרנו.

### קיצור דרך שחשוב לזכור (GUI)

```
make gui
./Gui
```

---


